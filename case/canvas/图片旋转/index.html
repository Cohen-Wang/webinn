<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" href="../../res/images/logo/logo.png" type="image/x-icon" />
        <link rel="shortcut icon" href="../../res/images/logo/logo.png" type="image/x-icon"/>
        <title>canvas-图片旋转</title>

        <link href="../../css/lib/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/bootstrap-theme.min.css" rel="stylesheet">
        <style>
            *{margin:0;padding: 0}
            body{min-height: 800px;overflow: hidden}
        </style>
    </head>
    <body>

        <div class="navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <strong>
                        <a href="../../index.html" class="navbar-brand">HOME</a>
                    </strong>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <div id="box" style="height:800px;">
                <canvas id="canvas" style="background-color: #000">您的浏览器不支持canvas!</canvas>
            </div>
        </div>



        <script>
            //
            let can = document.getElementById('canvas');
            let ctx = can.getContext('2d');
            //
            can.width = can.parentNode.offsetWidth;
            can.height = can.parentNode.offsetHeight;
            //
            let center = {
                x : can.width/2,
                y : can.height/2
            };
            //
            let url = './1.png';
            let oImg = new Image();
            let deg = 0;
            oImg.src = url;
            oImg.onload = function () {
                window.setInterval(function () {
                    //
                    ctx.clearRect(0, 0, can.width, can.height);
                    //
                    drawImage(oImg, -151, -151, deg);
                    deg ++;
                }, 1000/60)
            };

            function drawImage (oImg, x, y, deg) {
                ctx.save();
                ctx.beginPath();
                ctx.translate(center.x, center.y);
                ctx.rotate(deg * Math.PI/180);
                ctx.drawImage(oImg, x, y);

                ctx.closePath();
                ctx.restore();
            }
        </script>
    </body>
</html>